# Базовый слой
FROM node:13-alpine

# Копируем всё что нужно из локальной папки в образ
COPY . /

# Устанавливаем зависимости, в образе появится /node_modules
RUN npm ci
RUN npm run build

ENV listen_port=$PORT
# При старте контейнер начнёт общаться через 4000 порт
EXPOSE $listen_port

# При старте контейнер выполнит эту команду – запустит наше приложение
CMD [ "npm", "start" ]
